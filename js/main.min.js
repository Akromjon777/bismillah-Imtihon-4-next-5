const elList=document.querySelector(".users__list"),loaded=document.querySelector(".loader");let token=localStorage.getItem("token");function renderUsersToDom(a,b){b.innerHTML="",a.forEach(({id:a,name:f,username:g,email:c,address:h,phone:i,website:j,company:d})=>{let{street:k,suite:l,city:m,zipcode:n,geo:e}=h,{Companyname:r,catchPhrase:o,bs:p}=d,q=`
            <li onclick='getPosts(${a})' class="animate__animated animate__bounceInDown animate__delay-2s users-list__item">
                <span class="users-list__id">${a}</span>
                <h2 class="users-list__name">${f}</h2>
                <h3 class="users-list__username">${g}</h3>
                <a class="animate__animated animate__shakeX animate__repeat-2 animate__delay-3s users-list__link" href="mailto:${c}">${c}</a>
                <address class="users-list__address">
                <p class="users-list__address-street">${k}</p>
                <p class="users-list__address-suite">${l}</p>
                <p class="users-list__address-city">${m}</p>
                <p class="users-list__address-zipcode">${n}</p>
                </address>
                <div class="users-list__socials">
                <a class="animate__animated animate__bounce animate__delay-3s animate__repeat-2 users-list__geo-location" href="https://www.google.com/maps/place/${e.lat}, ${e.lng}" target="_blank"></a>
                <a class="animate__animated animate__headShake animate__delay-4s animate__repeat-2 users-list__socials-tel" href="tel:${i}"></a>
                <a class="animate__animated animate__heartBeat animate__delay-5s animate__repeat-2  users-list__socials-site" href="https://${j}" target="_blank"></a>
                </div>
                <div class="users-list__company">
                <span class="users-list__company-name">Company name: ${d.name}</span>
                <span class="users-list__company-catch">Catch: ${o}</span>
                <span class="users-list__company-bs">Bs: ${p}</span>
                </div>
            </li>
        `;b.insertAdjacentHTML("beforeend",q)})}function renderPostsDom(a,b){b.innerHTML="",a.forEach(({id:a,title:c,body:d})=>{let e=`
          <li class="animate__animated animate__fadeInUpBig animate__delay-1s posts-list__item" onclick='getComments(${a})'>
            <h3 class="posts-list__item-name">${c}</h3>
            <p class="posts-list__item-desc"><span class="posts-list__item-span">desc: </span>${d}</p>
          </li>`;b.insertAdjacentHTML("beforeend",e)})}function renderCommentsDom(a,b){b.innerHTML="",a.forEach(({name:c,email:a,body:d})=>{let e=`
          <li class="animate__animated animate__fadeInDown comments-list__item">
            <h2 class="comments-list__item-name">${c}</h2>
            <a class="animate__animated animate__bounceIn animate__repeat-1 animate__delay-1s comments-list__item-email" href="mailto:${a}" class="email">${a}</a>
            <p class="comments-list__item-desc">${d}</p>
          </li>`;b.insertAdjacentHTML("beforeend",e)})}async function getUsers(){try{let a=await (await fetch("https://jsonplaceholder.typicode.com/users")).json();renderUsersToDom(a,elList)}catch(b){console.log(b)}}async function getPosts(a){try{let b=await (await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${a}`)).json();renderPostsDom(b,postsList)}catch(c){console.log(c)}}async function getComments(a){try{let b=await (await fetch(`https://jsonplaceholder.typicode.com/comments?postId=${a}`)).json();renderCommentsDom(b,commentsList)}catch(c){console.log(c)}}token||location.replace("login.html"),setTimeout(()=>{loaded.style.opacity="0",setTimeout(()=>{loaded.style.display="none"},1e3)},2e3),getUsers()